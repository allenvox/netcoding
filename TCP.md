TCP (Transmission Control Protocol) - протокол транспортного уровня,
который обеспечивает надежную и упорядоченную передачу данных между
устройствами в сети.


Особенности:

Надежная доставка данных: TCP гарантирует, что данные будут доставлены
в назначенное место в правильном порядке и без потерь.

Управление потоком: TCP контролирует скорость передачи данных между
отправителем и получателем, чтобы предотвратить перегрузку сети.

Установка соединения: Протокол TCP использует трехступенчатое
установление соединения (three-way handshake) для установки связи
между отправителем и получателем (request - accept - connect).

Управление ошибками: TCP включает в себя механизмы обнаружения и
коррекции ошибок, чтобы обеспечить надежную передачу данных.

Подтверждение получения: Получатель отправляет подтверждения (ACK)
отправителю для подтверждения приема данных.

Передача потоком (stream): Данные передаются как непрерывный поток
байтов, а не в виде отдельных пакетов, как в UDP.


Процесс передачи данных по TCP:

Установление соединения: Отправитель и получатель обмениваются
специальными пакетами (сегментами) для установления соединения.

Передача данных: После установления соединения данные передаются
в виде потока байтов от отправителя к получателю.

Подтверждение получения: Получатель отправляет подтверждения
(ACK) для каждого полученного сегмента.

Управление потоком и ошибками: TCP использует механизмы управления
потоком и контроля ошибок для регулирования скорости передачи данных
и обеспечения надежности передачи.

Завершение соединения: После передачи данных соединение завершается
по инициативе одной из сторон или обеих сторон, используя
четырехступенчатый процесс завершения соединения (four-way handshake)
(request - accept - finish - finish)


Примеры использования TCP:

Веб-серверы и HTTP: TCP широко используется для передачи веб-страниц
и другого контента через протокол HTTP.

Электронная почта (SMTP, POP3, IMAP): Почтовые серверы используют
TCP для передачи электронных писем.

Файловые передачи (FTP): TCP используется для передачи файлов
между клиентами и серверами FTP.

Удаленный доступ (SSH, Telnet): Протоколы для удаленного доступа
используют TCP для обмена командами и данными между удаленными узлами.

Базы данных (MySQL, PostgreSQL, etc.): Базы данных используют TCP
для соединения с клиентами и передачи данных.


Преимущества:
Надежная доставка данных.
Управление потоком и ошибками.
Упорядоченная доставка данных.
Поддержка установления соединения и завершения.

Недостатки:
Более высокая накладная нагрузка из-за механизмов контроля ошибок и управления потоком.
Медленнее, чем UDP из-за дополнительной сложности передачи данных.


TCP-заголовок:

Source Port (Исходный порт): (16 бит)
Destination Port (Порт назначения): (16 бит)
Sequence Number (Порядковый номер): (32 бита)
Номер первого байта в сегменте данных. Используется для
управления упорядоченной доставкой и перестройки данных на приемной стороне.

Acknowledgment Number (Номер подтверждения): (32 бита)
Указывает на следующий ожидаемый байт, который получатель ожидает
получить от отправителя. Используется для подтверждения приема данных.

Data Offset (Смещение данных): (4 бита)
Размер заголовка TCP в 32-битных словах. Используется для
определения начала данных в сегменте TCP.

Reserved (Зарезервировано): (6 бит)
В настоящее время не используется и должно быть установлено в ноль.

---
Flags (Флаги): (6 бит)
SYN (Synchronize): Для инициализации установки соединения.
Когда клиент хочет установить соединение с сервером, он
отправляет пакет с установленным флагом SYN. При получении
такого пакета сервер отвечает пакетом с установленными флагами
SYN и ACK, чтобы подтвердить получение и готовность к установке соединения.

ACK (Acknowledgment): Для подтверждения получения данных. Когда
установлен этот флаг, это означает, что поле Acknowledgment Number
содержит действительный номер следующего ожидаемого байта.

FIN (Finish): Для завершения соединения. Когда одна из сторон хочет
закрыть соединение, она отправляет пакет с установленным флагом FIN.
Получив такой пакет, другая сторона также отправляет пакет с установленным
флагом FIN в ответ.

RST (Reset): Для сброса соединения. Когда сторона обнаруживает ошибку
или неожиданное состояние, она отправляет пакет с установленным
флагом RST, чтобы принудительно завершить соединение.
---

Window Size (Размер окна): (16 бит)
Размер окна приема, выраженный в байтах. Используется для
управления потоком данных и объемом данных, которые
отправитель может отправить до получения подтверждения.

Checksum (Контрольная сумма): (16 бит)
Используется для проверки целостности данных в сегменте TCP.

Urgent Pointer (Указатель на срочные данные): (16 бит)
Последний байт срочных данных в сегменте TCP. Используется,
когда установлен соответствующий флаг флага URG.